@using System.Collections;
@using FPTV.Models.Forum;
@{
	ViewData["Title"] = "Forum";
}
@model List<Topic>;
<!DOCTYPE html>

<head>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<html>
	<style>
		.central {
			width: 100%;
			margin: 0 auto;
			text-align: center;
			height:100%;
			/*background-color: white;*/
		}

		.center {
			display: flex;
			justify-content: center;
			align-items: center;
		}

		h1 {
			font-size: 36px;
			margin-bottom: 30px;
		}
		.buttons {
			display: flex;
			justify-content: center;
			margin-bottom: 30px;
		}
		.button {

			margin-left:10px;
			background-color: #e0eeff;
			color: black;
			border-radius: 5px;
			cursor: pointer;
			transition: all 0.2s ease-in-out;
			border: 1px solid black;
		}

		.btn1 {
			border: 1px solid black;
		}

		.button2 {
			background-color: #e0eeff;
			color: black;
			width:100%;
			padding: 10px 20px;
			border-radius:5px;
		}

		.button{
			background-color:
		}

		.button:hover {
			background-color: #2980b9;
		}
		.my-div {
			width:100%;
			display: flex;
			flex-direction: row;
			height: 50px;
			margin: 10px;
		}
		.my-div > div {
			flex-basis: 25%;
			flex-grow: 1;

		}

		span{
			font-weight:bold;
		}

		.dropdown {
			margin-left:10px;
			background-color: #e0eeff;
			color: #fff;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			transition: all 0.2s ease-in-out;
			border: 1px solid black;
		}

		.dropdown-content {
			display: none;
			position: absolute;
			z-index: 1;
			margin-left:5%;
			margin-top: 2px;

		}

		.dropdown:hover .dropdown-content {
			display: block;
		}

		.dropdown-content a {
			background-color:white;
			display: block;
			color: #000;
			padding: 10px;
			text-decoration: none;
			border: 1px solid black;
		}

		.dropdown-content a:hover {
			background-color: #bf7b8e;
		}

		.search-container {
			display: flex;
			align-items: center;
		}

		.search-container input[type="text"] {
			background-color: #e0eeff;
			color: black;
			width:100%;
			padding: 10px 20px;
			border:1px solid black;

		}

		.search-container img {
			margin-right: 10px;
			height: 30px;
			width: 30px;
		}

	a {
		color: inherit;
	}
</style>

<body class="bodytemp ">

	<div class="central bodycolor bordercolor"style="border-radius:15px; padding:1%">
		<h1 id="toTranslate">Forum</h1>

		<div class="buttons bodycolor">

			<form method="post" action="@Url.Action("Index", "Events", new { sort = ViewBag.sort, filter = ViewBag.filter})">
				<label class="search-container">
					<img src="~/images/procurar.png" />
					<input name = "search" type = "text" placeholder = "Search...">
				</label>	
			</form>

			<div class="dropdown">
				<button class="button2" id="toTranslate">Sort by</button>
				<div class="dropdown-content" style="margin-left:0px;">
					<a href="@Url.Action("Index", "Events", new { sort = "&sort=-begin_at", filter = ViewBag.filter, game = ViewData["game"]})">Newest</a>
					<a href="@Url.Action("Index", "Events", new { sort = "&sort=begin_at", filter = ViewBag.filter, game = ViewData["game"]})">Oldest</a>
					<a href="@Url.Action("Index", "Events", new { sort = "&sort=prizepool", filter = ViewBag.filter, game = ViewData["game"]})">Prizepool</a>
					<a href="@Url.Action("Index", "Events", new { sort = "&sort=name", filter = ViewBag.filter, game = ViewData["game"]})">Name</a>
					<a href="@Url.Action("Index", "Events", new { sort = "&sort=-tier", filter = ViewBag.filter, game = ViewData["game"]})">Tier</a>
			  </div>
			</div>

			<div style="padding:3px">
				<button class="button3 bordercolor"> <a href="@Url.Action("NewTopic", "Forum")" id="toTranslate">New Topic +</a></button>
			</div>

			<div style="padding:3px">
				<button class="button3 bordercolor"> <a href="@Url.Action("Rules", "Forum")" style="text-decoration:none;" id="toTranslate">Forum Rules</a></button>
			</div>

		</div>

		<!-- -------------------------------MENU DOS BUGS -------------------------------------------------------- -->
		<div class="center bodycolor" style="flex-direction: column; border-radius:15px ">
			<a style="text-decoration:none;" href="@Url.Action("BugsAndSuggestions", "Home")">
				<button style="margin:1%; width:100%;border-radius:5px" class="btn1 bordercolor">

					<div style="width:20%">
						<img src="~/images/settingForum.png" style="width:40%" />
					</div>

				<div style="width:60%; text-align:center">
					<h3 id="toTranslate">Bugs, Suggestions & Support</h3>
					<p style="margin-bottom:0px;font-size:20px" id="toTranslate">Report bugs and provide suggestions and clear doubts</p>
				</div>

				<div style="width:20%;text-align:right" >
					<img src="~/images/logo2.png" style="width:30%" />
					<p style="margin-bottom:0px;font-size:20px" id="toTranslate">1021 Comments</p>
					<p style="margin-bottom:0px;font-size:20px"id="toTranslate">621 Reactions</p>
					
					</div>

				</button>
			</a>
			<hr class="hrstyle"/>
			<!-- ---------------------------------------BOTÕES DOS TOPICOS DO FORUM------------------------------------------------ -->
			
			@foreach (Topic t in Model)
			{
				int reactionCount = 0;
				<button onclick="location.href='@Url.Action("Topic", "Forum", new {id = t.TopicId, game = ViewBag.Game})'" style="margin:1%; width:100%;border-radius:5px" class="btn1 bordercolor">

					<div style="width:60%;margin:auto;">
						<p style="margin-bottom:0px;margin-left:3%;text-align: left;font-size:25px" id="toTranslate">@t.Title</p>
					</div>

					<div style="width:20%; margin: auto;text-align:center;display:flex;justify-content:center">

						<div style="margin-bottom:0px;font-size:20px;display:flex;justify-content:center">
							<img src="data:image/*;base64,@(Convert.ToBase64String(t.Profile.Picture))" style="width:50px;height: 50px;margin:auto" />
							<p style="margin-top:25px;margin-left:5px;margin-right:5px;font-size:20px;font-weight:normal" id="toTranslate">@t.Profile.User.UserName </p>
							<img src="~/images/Flags/4x3/pt.svg" style="width:25px" />
						</div>
					</div>

					<div style="width:20%;text-align:right">
						<p style="font-size:17px">@t.Date</p>
						<p style="margin-bottom:0px;font-size:15px" id="toTranslate">@t.Comments.Count Comments</p>
						@foreach (Comment c in t.Comments)
						{
							reactionCount += c.Reactions.Count;
						}
						<p style="margin-bottom:0px;font-size:15px" id="toTranslate">@reactionCount Reactions</p>

					</div>

				</button>
			}
			


		</div>

	</div>
</body>
</html>

