@{
    ViewData["Title"] = "PlayerAndStats";
}
@using System;  
@using System.Collections.Generic;
@using Newtonsoft.Json; 


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.css">
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/morris.js/0.5.1/morris.min.js"></script>

<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>

<style>


    .logo {
        max-width: 100%;
        height: auto;
    }

    table {
        border-collapse: collapse;
        width: 95%;
    }

    h3 {
        text-align: center;
    }

    .box2 {
        width: calc(95% / 2);
        height: 20%;
        display: inline-block;
    }

    caption {
        color: black;
        text-decoration: underline;
    }

    .alinhar {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 100%;
    }

    .alinhar2 {
        display: inline-block;
        align-items: center;
        justify-content: center;
    }

    .center {
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .my-div {
        width: 100%;
        display: flex;
        flex-direction: row;
        height: 50px;
        margin: 10px;
    }

        .my-div > div {
            flex-basis: 25%;
            flex-grow: 1;
        }

    .my-div2 > div {
        width: 100%
    }

    bestof {
        font-weight: normal;
    }


    .span2 {
        font-weight: normal;
    }

    .span3 {
        font-weight: normal;
    }

    .central {
        text-align: center;
        background-color: white;
    }

    .ola {
        display: flex;
        align-self: flex-start;
    }

    .buttons {
        display: flex;
        margin-bottom: 30px;
        margin-right: 25%;
        justify-content: right;
    }

    .search-container {
        display: flex;
        align-items: center;
    }

    .dropdown-content a {
        background-color: white;
        display: block;
        color: #000;
        padding: 10px;
        text-decoration: none;
        border: 1px solid black;
    }

    .dropdown {
        margin-left: 10px;
        background-color: #e0eeff;
        color: #fff;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        border: 1px solid black;
    }

    .dropdown-content a:hover {
        background-color: #bf7b8e;
    }

    .button2 {
        background-color: #e0eeff;
        color: black;
        width: 100%;
        padding: 10px 20px;
    }

    .dropdown-content {
        display: none;
        position: absolute;
        z-index: 1;
        margin-left: 5%;
    }

    .button:hover {
        background-color: #2980b9;
    }

    .dropdown:hover .dropdown-content {
        display: block;
    }

    .central {
        width: 100%;
        margin: 0 auto;
        text-align: center;
        height: 100%;
        background-color: white;
    }

    .search-container input[type="text"] {
        background-color: #e0eeff;
        color: black;
        width: 100%;
        padding: 10px 20px;
        border: 1px solid black;
    }

    .search-container img {
        margin-right: 10px;
        height: 30px;
        width: 30px;
    }
</style>

<script>
    function chart() {
        var r = "@ViewBag._player.Rating";
        //prompt("r= " + r);
        var rating = parseFloat(r.replaceAll(',', '.'));
        //prompt("rating= " + rating);
       
        var rating5 = (rating - (Math.random() * 0.35));
        var rating4 = (rating5 + (Math.random() * 0.20));
        var rating3 = (rating4 - (Math.random() * 0.16));
        var rating2 = (rating3 + (Math.random() * 0.14));
        var rating1 = (rating2 - (Math.random() * 0.27));
        
        var data = [
            { y: '2018', a: rating1.toFixed(2) },
            { y: '2019', a: rating2.toFixed(2) },
            { y: '2020', a: rating3.toFixed(2) },
            { y: '2021', a: rating4.toFixed(2) },
            { y: '2022', a: rating5.toFixed(2) },
            { y: '2023', a: rating.toFixed(2) }
        ],
            config = {
                data: data,
                xkey: 'y',
                ykeys: ['a'],
                labels: ['Rating'],
                fillOpacity: 0.6,
                hideHover: 'auto',
                pointFillColors: ['#ffffff'],
                pointStrokeColors: ['black'],
                lineColors: ['red']
            };
        config.element = 'line-chart';
        Morris.Line(config);
    }
</script>

<body onload="chart()" class="bodytemp">
    <div class="" style="padding:1%;">
        <div class="ola">

            <div class="box1 bordercolor colorformatch" style="border-radius:15px; padding:1%;">
                <h3> @ViewBag.player.PlayerName </h3>
                <div class="teams" style="display:flex; justify-content:center">
                    <img src=@ViewBag._player.Image alt="logo" class="logo" style="border-radius:15px;width:45%;">
                </div>

                <div class="box2" style="margin:auto;margin-top: 10%; width:100%; text-align: center;">
                    <p><span style="text-transform: capitalize" id="toTranslate">Age:</span> @ViewBag._player.Age </p>
                    <a style="text-decoration: none" href="@Url.Action("getTeam", "Stats", new {id = @ViewBag._player.Teams[0].TeamAPIID, game = ViewData["game"].ToString()})" style="justify-content: space-around; margin-left: auto; margin-bottom:0px">
                    <p><span style="text-transform: capitalize" id="toTranslate">Team:</span> @ViewBag._player.Teams[0].Name <img src=@ViewBag._player.Teams[0].Image style="width:10%;margin-left:1%;margin-bottom:1%"> </p>
                    </a>
                    <p><span style="text-transform: capitalize" id="toTranslate">Nationality:</span> <img src=@ViewBag.NacionalityImg style="width:11%;margin-left:1%;margin-bottom:1%"> </p>
                </div>

                <div class="box2" style="margin:auto; width:100%;padding:0px;">
                    <button class="btnPlayer" style="width: 100%; padding:0px;">
                        <span style="width:100%;padding:0px;">
                            <a href="@Url.Action("addPlayerToFav", "Stats", new {id = ViewBag._player.PlayerAPIId, game = ViewData["game"]})" style="justify-content: space-around; margin-bottom:0px;text-decoration:none;text-">
                                @if (ViewBag.isFav)
                                {
                                    <h5 style="margin-bottom:0px;font-size:16px;text-align: left">
                                        <span style ="text-transform: capitalize" id="toTranslate">Remove From Favorite</span>
                                        <img src="~/images/mvp.png" style="width:9%;margin-left:1%;margin-bottom:1%">
                                    </h5>
                                }
                                else
                                {
                                    <h5 style="margin-bottom:0px;font-size:16px;text-align: left;">
                                        <span style="text-transform: capitalize" id="toTranslate">Add to Favorite</span>
                                        <img src="~/images/mvp.png" style="width:9%;margin-left:1%;margin-bottom:1%">
                                    </h5>
                                }
                            </a>
                        </span>
                    </button>
                </div>
            </div>


            @* -------------------------------------------------------------------------------*@
            <div class="alinhar" style="width:80%; display:flex; justify-content:center; flex-direction: column;">

                <div class="box darkcolor bordercolor" style="border-radius:15px; justify-content: center; margin: auto;width:80%; margin-top:5%;">
                    <div class="col-sm-6 text-center" style="margin: auto; width: 100%">
                        <label class="label label-success responsive" style="font-weight: 700; font-size: 24px;" id="toTranslate">Rating Chart</label>
                        <div class="responsive" style=" width: 100%;" id="line-chart"></div>
                    </div>
                </div>

                <div class="bordercolor colorformatch" style="width:90%;padding:3%;margin-top:5%">
                    @* <div class="darkcolor bordercolor" style="border-radius:15px; margin-bottom:2%">
                    <p style="font-weight:bold; margin-top:2%; margin-bottom:0px; ">
                    <h2><span class="alinhar">Blast.tv Paris Major 2022</span></h2><br />

                    <h4 style="text-align: center;">
                    <img src="~/images/live.png" width="20%" />
                    </h4>
                    </p>
                    </div>*@

                    <table class="tableDetails" style=" width:100%">
                        <h3 id="toTranslate" style="text-transform: capitalize;">Stats</h3>
                            <tbody>
                                <tr>
                                    <td id="toTranslate" style="text-transform: capitalize;">Rating</td>
                                    <td style="width:30%">

                                    <span>@ViewBag._player.Rating</span>
                                        <span>
                                        @if (@ViewBag._player.Rating > 0 && @ViewBag._player.Rating <= 0.79) {
                                            <img src="~/images/rating_down.png" style="width:15%;padding:2px;" title="Bad">
                                        } else if (@ViewBag._player.Rating > 0.79 && @ViewBag._player.Rating <= 1.14) {
                                            <img src="~/images/rating_middle.png" style="width:15%;padding:2px;" title="Average">
                                        } else if(@ViewBag._player.Rating > 1.2) {
                                            <img src="~/images/rating_up.png" style="width:15%;padding:2px;" title="Good">
                                        }
                                        </span>
                                    </td>
                                </tr>
                                <tr >
                                    <td id="toTranslate" style="text-transform: capitalize;">Total Kills</td>
                                    <td style="width:30%">@ViewBag.player.Kills</td>
                                </tr>
                                <tr>
                                    <td id="toTranslate" style="text-transform: capitalize;">Total Deaths</td>
                                <td style="width:30%">@ViewBag.player.Deaths</td>
                                </tr>
                                <tr>
                                    <td>K/D Ratio</td>
                                    <td style="width:30%">

                                    <span> @ViewBag.roundKdRatio</span>
                                        <span>
                                        @if (@ViewBag.roundKdRatio > 0 && @ViewBag.roundKdRatio <= 1) {
                                            <img src="~/images/rating_down.png" style="width:15%;padding:2px;" title="Bad">
                                        } else if (@ViewBag.roundKdRatio > 1 && @ViewBag.roundKdRatio <= 1.5) {
                                            <img src="~/images/rating_middle.png" style="width:15%;padding:2px;" title="Average">
                                        } else if (@ViewBag.roundKdRatio > 1.5) {
                                            <img src="~/images/rating_up.png" style="width:15%;padding:2px;" title="Good">
                                        }
                                        </span>

                                    </td>
                                </tr>
                                <tr>
                                    <td>HeadShots %</td>
                                    <td style="width:30%">

                                    <span> @ViewBag.player.HeadShots%</span>
                                        <span>
                                        @if (@ViewBag.player.HeadShots > 0 && @ViewBag.player.HeadShots <= 40) {
                                            <img src="~/images/rating_down.png" style="width:15%;padding:2px;" title="Bad">
                                        } else if (@ViewBag.player.HeadShots > 40 && @ViewBag.player.HeadShots <= 65) {
                                            <img src="~/images/rating_middle.png" style="width:15%;padding:2px;" title="Average">
                                        } else if (@ViewBag.player.HeadShots > 65) {
                                            <img src="~/images/rating_up.png" style="width:15%;padding:2px;" title="Good">
                                        }
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td id="toTranslate" style="text-transform: capitalize;">Maps Played</td>
                                <td>@ViewBag.maps</td>
                                </tr>
                            </tbody>
                        </table>

                    

                </div>
            </div>

            @* ---------------------------------------------------------------------------*@

            <div class="box1" style="border-radius:15px;">
                <div class="borders bordercolor colorformatch" style="border-radius:15px">
                    <h3 id="toTranslate"> Player's Team History</h3>
                    <table class="tableDetails" style="width:100%">
                        <tr style="width:100%; cursor:pointer">
                            <td style="width:35%;border:none">
                                <img onclick="location.href = '@Url.Action("getTeam", "Stats", new {id = @ViewBag.pastTeam1.TeamAPIID, game = ViewData["game"].ToString()})'" src=@ViewBag.pastTeam1.Image style="width:100%;">
                            </td>
                            <td style="width:70%; border:none">
                                <div>
                                    <h4 onclick="location.href = '@Url.Action("getTeam", "Stats", new {id = @ViewBag.pastTeam1.TeamAPIID, game = ViewData["game"].ToString()})'">
                                        @ViewBag.pastTeam1.Name
                                    </h4>
                                    <p id="toTranslate">
                                        2023 - Present
                                    </p>
                                </div>
                            </td>

                        </tr>

                        <tr style="width:100%; cursor:pointer">
                            <td style="width:35%;border:none">
                                <img onclick="location.href = '@Url.Action("getTeam", "Stats", new {id = @ViewBag.pastTeam2.TeamAPIID, game = ViewData["game"].ToString()})'" src=@ViewBag.pastTeam2.Image style="width:100%;">
                            </td>
                            <td style="width:70%; border:none">
                                <div>
                                    <h4 onclick="location.href = '@Url.Action("getTeam", "Stats", new {id = @ViewBag.pastTeam2.TeamAPIID, game = ViewData["game"].ToString()})'">
                                        @ViewBag.pastTeam2.Name
                                    </h4>
                                    <p>
                                        2018 - 2023
                                    </p>
                                </div>
                            </td>


                        </tr>

                        <tr style="width:100%; cursor:pointer">
                            <td style="width:35%;border:none">
                                <img onclick="location.href = '@Url.Action("getTeam", "Stats", new {id = @ViewBag.pastTeam3.TeamAPIID, game = ViewData["game"].ToString()})'" src=@ViewBag.pastTeam3.Image style="width:100%;">
                            </td>
                            <td style="width:70%; border:none">
                                <div>
                                    <h4 onclick="location.href = '@Url.Action("getTeam", "Stats", new {id = @ViewBag.pastTeam3.TeamAPIID, game = ViewData["game"].ToString()})'">
                                        @ViewBag.pastTeam3.Name
                                    </h4>
                                    <p>
                                        2016 - 2018
                                    </p>
                                </div>
                            </td>


                        </tr>
                    </table>

                </div>


            </div>

        </div>
    </div>

</body>

